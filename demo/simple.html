<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Bridge - Simple Example</title>
	<script language="Javascript" src="../dist/diagram.js"></script>
	<script language="Javascript" src="../demo/dagre.min.js"></script>
	<link type="text/css" rel="stylesheet" href="../material.css" />
	<link type="text/css" rel="stylesheet" href="../style.css" />
</head>
<body>
<script>
    let bridge = new DiagramJS.Bridge();
//Snowflower.prototype.getEvents= function(){
//	return ["element.click", "element.move"];
//}

//Snowflower.prototype.fireEvent= function(eventType, data) {
//	var text = owner.fireEvent("openTextField");
//}
//Snowflower.prototype.onClick = function(){};


//var bridge = new Bridge();
var table = bridge.load({class:"table", property:"talk", columns:[{id:'room'}, {id:'day'}, {id:'talk'},  {id:'state'}], searchColumns:["day", "talk"]});
console.log(table.id);
//bridge.load("persons");

bridge.load({id:"t1", class:"talk", prop:{room:"Heyl", day:"Monday",talk: "01. Meier", state:"ok", comment:"", no:"", slides:"1", html:"", Author: "", "Peer Info": "", Explorer: "Explorer"}});
bridge.load({id:"t1", upd:{talk: "01. Schulze"}});
bridge.load({id:"r2", class:"room", prop:{name:"Heyl"}});
bridge.load({id:"t2", class:"talk", prop:{room:"Heyl", day:"Monday",talk: "02. Schmidt", state:"ok", comment:"", no:"", slides:"2", html:"", Author: "", "Peer Info": "", Explorer: "Explorer"}});
bridge.addToolbar();

bridge.load({id:table.id, columns:[{id:'slides'}]});






var data = {
	  type: 'clazzdiagram',
	  nodes: [
	    {
	      type: 'clazz',
	      name: 'User',
	      attributes: [ '+ name : string', '+ address : string', '- id : int'],
	      methods: [ '+ register()', '+ login()' ]
	    },
	    {
	      type: 'clazz',
	      name: 'Order',
	      attributes: [ '+ status : string', '+ date : string', '- orderId : int'],
	      methods: [ '+ place()', '+ cancel()', '+ refund()']
	    },
	    {
	      type: 'clazz',
	      name: 'Account',
	      attributes: [ '- id : int']
	    },
	    {
	      type: 'clazz',
	      name: 'Product',
	      attributes: [ '+ name : string', '+ description : string', '+ photo : string', '- id : int'],
	      methods: [ '+ addToOrder()' ]
	    },
	    {
	      type: 'clazz',
	      name: 'Payment',
	      attributes: [ '+ provider : string', '+ amount : string' ],
	      methods: [ '+ getStatus()' ]
	    }
	  ],
	  edges: [
	    { type: 'edge', source: 'Order', target: 'Product' },
	    { type: 'edge', source: 'User', target: 'Order' },
	    { type: 'edge', source: 'User', target: 'Account' },
	    { type: 'edge', source: 'Order', target: 'Payment' },
	    { type: 'edge', source: 'Payment', target: 'Account' }
	  ]
	};

	var options = {
	  canvas: 'canvas',
	  origin: new Point(150, 45),
	  features: {
	    drag: true,
	    editor: true,
	    palette: true,
	    select: true,
	    zoom: true
	  }
	};

bridge.load({class:"Graph", data:data, options:options}); 




Snowflower = function() {};
Snowflower.prototype.getSVG = function(){
	let g = util.createShape({tag: 'g', transform: 'translate(0,289) scale(0.1,-0.1)', fill:"#000000"});
	let path = util.createShape({tag: 'path', d:"M1264 2876 c-17 -8 -40 -26 -52 -41 -21 -26 -22 -39 -22 -191 0 -90 -3 -164 -7 -164 -3 0 -32 22 -62 48 -187 161 -188 162 -237 162 -75 0 -113 -29 -128 -101 -13 -58 10 -84 225 -270 l209 -180 0 -234 c0 -129 -3 -235 -7 -235 -5 0 -98 55 -208 123 l-199 122 -42 255 c-23 140 -46 266 -52 280 -16 41 -48 63 -100 68 -58 5 -86 -7 -112 -51 -25 -41 -25 -81 0 -230 12 -66 20 -126 18 -133 -2 -8 -48 15 -133 66 -102 63 -137 80 -168 80 -75 0 -127 -50 -127 -122 0 -55 31 -89 136 -152 55 -33 117 -71 138 -84 l40 -25 -158 -47 c-112 -34 -166 -55 -183 -73 -30 -29 -41 -94 -23 -137 15 -37 67 -70 109 -70 17 0 144 34 282 75 139 41 255 75 258 75 4 0 97 -56 209 -124 l202 -123 -202 -123 c-111 -68 -209 -125 -218 -127 -10 -3 -128 32 -265 77 -282 93 -301 94 -355 34 -24 -28 -30 -44 -30 -79 0 -76 30 -99 210 -160 l153 -52 -79 -48 c-167 -103 -185 -116 -204 -147 -25 -42 -25 -84 0 -126 22 -36 56 -52 110 -55 28 -1 63 16 170 81 73 45 135 80 137 78 3 -2 -7 -65 -21 -138 -29 -151 -31 -192 -13 -228 16 -32 73 -70 106 -70 33 0 85 31 106 63 9 14 38 143 65 288 27 144 55 268 62 274 23 21 365 225 377 225 8 0 11 -64 11 -230 0 -207 -2 -232 -18 -247 -9 -10 -101 -89 -203 -176 -103 -87 -192 -170 -200 -184 -33 -62 0 -151 66 -173 62 -21 94 -6 223 106 67 57 124 104 127 104 3 0 5 -72 5 -161 0 -176 6 -201 60 -233 35 -20 73 -20 114 -1 56 27 61 43 66 234 l5 174 123 -111 c135 -122 167 -137 235 -108 46 19 69 55 69 110 1 59 -6 68 -239 277 l-193 172 0 229 c0 126 3 227 8 225 34 -18 370 -223 379 -231 7 -6 35 -130 62 -274 28 -147 57 -275 66 -288 21 -33 73 -64 106 -64 33 0 90 38 106 70 18 36 16 70 -13 224 -14 76 -24 140 -22 142 2 2 64 -33 138 -78 107 -66 141 -82 170 -81 78 3 117 38 127 110 9 71 -19 96 -267 245 l-35 21 154 52 c182 62 211 84 211 161 0 39 -5 51 -33 79 -58 58 -73 56 -352 -35 -137 -45 -257 -79 -266 -77 -9 3 -107 60 -218 127 l-201 123 43 26 c23 15 115 71 204 125 l162 98 255 -76 c140 -42 270 -76 288 -76 38 0 86 28 104 62 26 46 11 123 -31 158 -8 7 -86 34 -172 60 l-157 47 40 25 c21 13 86 53 143 88 80 49 107 71 117 96 38 90 -17 174 -113 174 -31 0 -65 -16 -169 -79 -71 -44 -130 -75 -132 -70 -2 4 6 67 17 139 12 72 21 144 21 161 0 37 -23 83 -52 103 -27 19 -94 21 -127 3 -51 -26 -60 -52 -101 -307 -22 -135 -42 -255 -45 -267 -3 -15 -63 -57 -204 -142 -109 -67 -202 -121 -205 -121 -3 0 -6 102 -6 228 l1 227 209 188 c226 202 239 220 219 291 -15 53 -60 86 -119 86 -54 0 -50 3 -211 -142 -47 -43 -89 -78 -92 -78 -4 0 -7 75 -7 167 0 162 -1 167 -25 199 -15 20 -40 37 -63 44 -45 12 -40 12 -78 -4z"});

	g.appendChild(path);
	return g;
}
Snowflower.prototype.getSize = function(){
	return new Point(290,290);
}

bridge.addControl(Snowflower);


bridge.load({class:"Snowflower"});
bridge.load({class:"Snowflower"});
bridge.load({class:"Snowflower"});



</script>
</body>

