<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>Bridge - Simple Example</title>
    <script language="Javascript" src="../build/output.js"></script>
    <link type="text/css" rel="stylesheet" href="../material.css"/>
    <link type="text/css" rel="stylesheet" href="../style.css"/>
</head>
<body>

<!--<table id="persons" control="Table"  style="border:1px solid red;"><tr><th>#</th></tr><tr><td>1</td></tr></table>-->
<table id="persons" class="Table" style="border:1px solid red;" property="talk">
    <thead>
    <tr>
        <th>room</th>
        <th>day</th>
        <th>talk</th>
        <th>state</th>
        <th>time</th>
    </tr>
    </thead>
</table>

<div id="divContainer" class="Div" property="t1.talk" style="border: groove" onchange="alert('change!');"></div>

<input class="Input" id="t1talk" property="t1.talk" type="text" value="01. Meier" oncontextmenu="alert('t1.talk');">

<script>
    //var bridge = new Bridge();
    bridge.load({
        class: "table",
        property: "talk",
        columns: [{id: 'room'}, {id: 'day'}, {id: 'talk'}, {id: 'state'}, {id: 'time'}],
        searchColumns: ["day", "talk"]
    });
    bridge.load("persons");

    var form = {
        id: "t1form",
        property: "t1",
        class: "form",
        elements: [
            {id: "testid1", name: "testid1", property: "talk"},
            {id: "testid2", name: "testid2", property: "room"},
            {id: "testid3", name: "testid3", property: "day"},
            {id: "testid4", name: "testid4", property: "time", type: "time"},
            {id: "testid5", name: "testid5", property: "time", type: "text"},
            {id: "testid6", type: "submit"}
        ]
    };
    bridge.load(form);

    bridge.load("divContainer");

    var t1controlid = bridge.load("t1talk");
    bridge.load({class: "input", id: "t2.talk", property: "t2.talk", type: "text"});
    // for debugging purpose:
    document.getElementById("t2.talk").setAttribute("oncontextmenu", "alert('t2.talk');");


    bridge.executeChange({
        id: "t1",
        class: "talk",
        prop: {
            room: "Heyl",
            day: "Monday",
            talk: "01. Meier",
            state: "ok",
            time: "18:15",
            comment: "",
            no: "",
            slides: "",
            html: "",
            Author: "",
            "Peer Info": "",
            Explorer: "Explorer"
        }
    });
    bridge.executeChange({id: "t1", upd: {talk: "01. Schulze"}});
    bridge.executeChange({id: "r2", class: "room", prop: {name: "Heyl"}});
    bridge.executeChange({
        id: "t2",
        class: "talk",
        prop: {
            room: "Heyl",
            day: "Monday",
            talk: "02. Schmidt",
            state: "ok",
            comment: "",
            no: "",
            slides: "",
            html: "",
            Author: "",
            "Peer Info": "",
            Explorer: "Explorer",
            time: "20:15"
        }
    });
    bridge.executeChange({
        id: "t3",
        class: "talk",
        prop: {
            room: "1603",
            day: "Tuesday",
            talk: "03. Peter",
            state: "ok",
            comment: "",
            no: "",
            slides: "",
            html: "",
            Author: "",
            "Peer Info": "",
            Explorer: "Explorer",
            time: "20:15"
        }
    });

    // change property of input field:
    //    var t1talk = document.getElementById("t1talk");
    //    t1talk.setAttribute("property", "t2.room");
    var t1control = bridge.controls[t1controlid];
    t1control.setProperty("t1.talk");

    var divContainer = document.getElementById("divContainer");
    divContainer.innerHTML = "01. Test";

    bridge.load({id:"label", class: "label", textContent: "Testitest"});

</script>
</body>

